# 상품 이미지 정합성 확보 및 클레임 방지 시스템

> 작성일: 2025-12-24
> 소속: (주)구하다 / Tech 팀
> 기간: 2023

---

## 개요

해외 부티크 상품 이미지 변경 감지 시스템을 구축하여 '상품 상이' 클레임을 완전 제거한 프로젝트.

---

## 배경 및 문제점

### 기존 상황
- 해외 부티크에서 상품 이미지(색상, 디테일) 변경 시 URL이 동일하게 유지
- 쇼핑몰 노출 이미지와 실제 배송 상품 불일치 발생

### 문제점
- **클레임 발생**: '상품 상이' 클레임 다수 발생
- **비용 증가**: 반품 처리 비용 증가
- **신뢰도 하락**: 브랜드 신뢰도 하락, CS팀 지속적 개선 요청

### 목표
- 이미지 데이터 정합성 100% 확보로 고객 클레임 원천 차단
- 파일 자체 변경 감지 가능한 고성능/저비용 검증 로직 구현
- 수동 검수 프로세스의 시스템 전환

---

## 상세 구현

### 아키텍처/설계

```
┌─────────────────────────────────────────────────────────────┐
│                   Image Sync Scheduler                       │
│                    (24시간 무인 운영)                         │
└─────────────────────────┬───────────────────────────────────┘
                          │
                          ▼
┌─────────────────────────────────────────────────────────────┐
│               HTTP Header Check (1차)                        │
│              (ETag, Last-Modified)                           │
└─────────────────────────┬───────────────────────────────────┘
                          │
           ┌──────────────┴──────────────┐
           │ 변경 감지                    │ 변경 없음
           ▼                             ▼
┌─────────────────────┐         ┌─────────────────────┐
│  MD5 Hash Check     │         │      Skip           │
│     (2차)           │         │                     │
└─────────┬───────────┘         └─────────────────────┘
          │
          │ 해시값 불일치
          ▼
┌─────────────────────────────────────────────────────────────┐
│                   S3 Immediate Upload                        │
│                  (CDN 즉시 반영)                             │
└─────────────────────────────────────────────────────────────┘
```

### 기술 스택

| 구분 | 기술 |
|------|------|
| 언어 | Java |
| 프레임워크 | Spring Boot |
| 스토리지 | AWS S3 |
| 검증 | Image Hashing (MD5/ETag) |

### 구현 내용

#### 1. 문제 원인 분석
- CS팀과 협업하여 클레임 패턴 분석
- URL 동일하나 이미지 내용 변경되는 케이스 발견
- 해시 기반 검증 방안 제안

#### 2. 해시 기반 검증 시스템 구축
- HTTP Header(ETag, Last-Modified) 1차 비교
- MD5 해시값 2차 비교로 이미지 변경 정밀 감지

#### 3. 동기화 파이프라인 고도화
- 해시값 O(1) 비교로 변경 감지 시 S3 즉시 업데이트
- Header 우선 비교로 네트워크 비용 최소화 (80% 절감)

#### 4. 운영 자동화
- 24시간 무인 이미지 동기화 운영 체계 구축

### 기술적 의사결정

| 결정 | 선택 | 이유 |
|------|------|------|
| 검증 방식 | MD5 해시 + ETag 이중 검증 | URL 동일해도 이미지 내용 변경 감지, Header 우선 비교로 네트워크 비용 80% 절감 |
| 스토리지 | S3 직접 업로드 | CDN 캐시 무효화 없이 즉시 반영, 운영 복잡도 제거 |

---

## 결과 및 성과

### 정량적 성과
- **클레임 Zero 달성**: 이미지 불일치 오배송 클레임 완전 제거
- **반품 비용 절감**: 이미지 상이로 인한 반품 처리 비용 제거
- **Zero Ops 달성**: 수동 검수 → 자동화로 운영 리소스 절감

### 정성적 효과
- 고객 신뢰도 회복으로 구매 전환율 안정화
- CS팀 클레임 처리 업무 부담 제거
- 브랜드 이미지 보호

---

## 팀 영향 및 공유

### 팀 내 공유
- 이미지 동기화 시스템 아키텍처 문서화

### 타 팀 협업
- CS팀: 클레임 패턴 분석 협업, 개선 효과 공유

---

## 이력서 반영 여부

- [x] 이력서 반영 (프로젝트 3)
- [ ] 작업 로그만 기록

**사유:** 클레임 Zero 달성이라는 명확한 성과, 해시 기반 검증 기술 어필

---

## 향후 개선점

- 이미지 유사도 비교 (픽셀 단위) 도입 검토
- 변경 이력 대시보드 구축
